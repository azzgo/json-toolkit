# UI现代化任务列表

## Phase 1: 核心主题系统重构 (优先级: 高)

### 1.1 更新CSS变量定义
- [ ] 修改 `packages/toolkit/src/index.css` 中的根级CSS变量
- [ ] 将当前温暖色调替换为现代中性色彩
- [ ] 实现基于OKLCH色彩空间的新色彩系统
- [ ] 确保深色模式变量正确映射
- [ ] 测试所有颜色变量的对比度符合WCAG AA标准

### 1.2 字体系统现代化
- [ ] 更新CSS中的字体栈定义
- [ ] 为UI元素设置现代无衬线字体 (Inter, system-ui)
- [ ] 为代码区域强制使用现代等宽字体 (JetBrains Mono, Fira Code)
- [ ] 调整代码区域行高至最小1.5
- [ ] 实现JSON键值的字重区分 (bold键名, normal值)

### 1.3 JSON编辑器主题集成
- [ ] 更新 `--jse-*` CSS变量以匹配新主题
- [ ] 调整JSON语法高亮颜色 (键名、字符串、数字、布尔值、null)
- [ ] 确保编辑器背景与主题背景一致
- [ ] 更新编辑器边框为微妙灰色
- [ ] 测试搜索高亮和选择状态的视觉效果

## Phase 2: 组件样式现代化 (优先级: 高)

### 2.1 按钮系统重构
- [ ] 更新 `packages/toolkit/src/components/ui/button.tsx`
- [ ] 实现Primary/Secondary/Ghost/Icon按钮层次
- [ ] 移除次要按钮的实色背景
- [ ] 确保仅主要CTA使用实色背景
- [ ] 添加现代化的悬停和激活状态

### 2.2 侧边栏设计更新
- [ ] 修改 `packages/toolkit/src/components/app-sidebar.tsx`
- [ ] 实现窄边栏设计 (64px收起/240px展开)
- [ ] 移除厚重背景色和边框
- [ ] 更新菜单项的视觉样式
- [ ] 优化图标和标签的间距

### 2.3 导航和标签现代化
- [ ] 更新所有标签导航组件
- [ ] 实现现代下划线指示器或药丸状设计
- [ ] 移除传统实色背景标签
- [ ] 确保激活状态清晰可见
- [ ] 添加平滑的过渡动画

## Phase 3: 布局和专用组件 (优先级: 中)

### 3.1 布局组件优化
- [ ] 更新 `packages/toolkit/src/components/layout.tsx`
- [ ] 减少导航栏高度
- [ ] 优化主内容区域的边距和间距
- [ ] 确保响应式布局在小屏幕下正常工作
- [ ] 测试扩展popup模式下的布局适配

### 3.2 差异视图设计
- [ ] 更新 `packages/toolkit/src/pages/DiffPage.tsx` 相关样式
- [ ] 实现柔和背景色的差异指示 (删除红色、新增绿色)
- [ ] 移除基于文字颜色的差异指示
- [ ] 确保行号使用中性灰色
- [ ] 测试长文本和深层嵌套的显示效果

### 3.3 输入和表单组件
- [ ] 更新 `packages/toolkit/src/components/ui/input.tsx`
- [ ] 更新 `packages/toolkit/src/components/ui/select.tsx`
- [ ] 实现现代化的输入框边框和背景
- [ ] 添加焦点状态的主色调边框
- [ ] 确保表单验证状态的视觉反馈

## Phase 4: 页面特定样式 (优先级: 中)

### 4.1 JSON编辑器页面
- [ ] 更新 `packages/toolkit/src/pages/JsonEditor.tsx` 样式
- [ ] 确保工具栏按钮符合新的按钮系统
- [ ] 优化编辑器和输出面板的视觉分离
- [ ] 测试大型JSON文件的显示性能

### 4.2 JWT解码器页面
- [ ] 更新 `packages/toolkit/src/pages/JwtDecoder.tsx` 样式
- [ ] 优化头部/载荷/签名的视觉区分
- [ ] 确保代码区域使用正确的等宽字体
- [ ] 改善错误状态的视觉指示

### 4.3 其他功能页面
- [ ] 更新 `packages/toolkit/src/pages/UrlParamsConverter.tsx`
- [ ] 更新 `packages/toolkit/src/pages/MockDataGenerator.tsx`  
- [ ] 更新 `packages/toolkit/src/pages/CodeGenerationPage.tsx`
- [ ] 确保所有页面遵循统一的视觉标准

## Phase 5: 浏览器扩展适配 (优先级: 中)

### 5.1 扩展popup界面
- [ ] 更新 `packages/extension/public/index.html` 相关样式
- [ ] 确保400x600px尺寸下的最佳显示效果
- [ ] 简化导航为适合小窗口的形式
- [ ] 测试所有功能在扩展模式下的可用性

### 5.2 扩展图标和资源
- [ ] 检查 `packages/extension/public/icon*.png` 是否需要更新
- [ ] 确保图标与新设计风格一致
- [ ] 测试各种浏览器扩展界面的显示

## Phase 6: 质量保证和优化 (优先级: 低)

### 6.1 可访问性测试
- [ ] 验证所有颜色组合的对比度
- [ ] 测试键盘导航的完整性
- [ ] 确保屏幕阅读器兼容性
- [ ] 验证高对比度模式的支持

### 6.2 性能验证
- [ ] 测量新CSS的加载性能影响
- [ ] 验证主题切换的流畅度
- [ ] 检查大型JSON文件的渲染性能
- [ ] 优化关键CSS的提取

### 6.3 跨浏览器测试
- [ ] Chrome最新版本测试
- [ ] Firefox最新版本测试
- [ ] Safari最新版本测试 (如可用)
- [ ] 测试各浏览器的扩展兼容性

### 6.4 用户验收测试
- [ ] 收集内部测试反馈
- [ ] 进行A/B测试对比 (如可行)
- [ ] 根据反馈进行微调
- [ ] 准备发布说明和迁移指南

## 验证标准

每个任务完成后需要验证：
- [ ] 视觉效果符合设计规范
- [ ] 功能完整性未受影响  
- [ ] 响应式布局正常工作
- [ ] 深色模式正确显示
- [ ] 可访问性标准达标
- [ ] 性能无明显下降

## 依赖关系

- **Phase 1必须最先完成** - 为后续组件提供基础变量
- **Phase 2可以并行进行** - 各组件相互独立
- **Phase 3依赖Phase 1和2** - 需要基础主题和组件完成
- **Phase 4可以并行进行** - 页面样式独立更新
- **Phase 5依赖前面所有阶段** - 需要完整主题系统
- **Phase 6在最后进行** - 整体质量验证

## 回滚计划

如遇到严重问题：
- [ ] 保留当前 `index.css` 为 `index.css.backup`
- [ ] 准备快速恢复的git分支
- [ ] 建立渐进式发布机制
- [ ] 设置用户反馈收集渠道